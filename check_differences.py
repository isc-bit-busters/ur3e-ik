import json
from ur_ikfast import ur_kinematics

# function to read a simulation json and read it to control the robot
def readJson(path):
	points = []
	with open(path, 'r') as file:
		data = json.load(file)["modTraj"]
		for i in data:
			points.append(i['positions'])
	return points


margin = 1
joints = [0]

problematic_points = []

points = readJson("traj.json")
for i in range(1,len(points)):
	p1 = points[i-1]
	p2 = points[i]
	for j in range(len(p1)):
		ax1 = p1[j]
		ax2 = p2[j]
		if (ax1-ax2 > margin or ax1-ax2 < -1 * margin) and j in joints:
			print(f"Large difference detected at index {i}:{j} : {ax1} vs {ax2}")
			problematic_points.append(i)

# arm with pen
ur3e_arm = ur_kinematics.URKinematics('ur3e_pen_final_2')

for i in problematic_points:
	print("==========================================================")
	print(f"Checking point {i}")
	print("==========================================================")
	# forward kinematics
	#pm2 = points[i-2]
	pm1 = points[i-1]
	pm = points[i]
	#pp1 = points[i+1]
	#pp2 = points[i+2]

	#print(f"p - 2: {pm2}")
	print(f"p - 1: {pm1}")
	print(f"p    : {pm}")
	#print(f"p + 1: {pp1}")
	#print(f"p + 2: {pp2}")

	#f_pm2 = ur3e_arm.forward(pm2)
	f_pm1 = ur3e_arm.forward(pm1)
	f_pm = ur3e_arm.forward(pm)
	#f_pp1 = ur3e_arm.forward(pp1)
	#f_pp2 = ur3e_arm.forward(pp2)

	#print(f"p - 2: {f_pm2[:3]}")
	print(f"p - 1: {f_pm1}")
	print(f"p    : {f_pm}")
	#print(f"p + 1: {f_pp1[:3]}")
	#print(f"p + 2: {f_pp2[:3]}")

	#print("\nsolutions for movement 1:")
	#print(f"(previous point: {pm2})")
	#i_pm1 = ur3e_arm.inverse(ee_pose=f_pm1, all_solutions=True)
	#print(i_pm1)
	print("\nsolutions for movement 2:")
	print(f"(previous point: {pm1})")

	print("\nall solutions:")
	i_pm = ur3e_arm.inverse(ee_pose=f_pm, all_solutions=True)
	print(i_pm)

	print("\nbest solution according to q_guess:")
	i_best = ur3e_arm.inverse(ee_pose=f_pm, q_guess=pm1)
	print(i_best)

	print("\nsolution previously chosen:")
	print(pm)

	#print("\nsolutions for movement 3:")
	#print(f"(previous point: {pm})")
	#i_pp1 = ur3e_arm.inverse(ee_pose=f_pp1, all_solutions=True)
	#print(i_pp1)
	#print("\nsolutions for movement 4:")
	#print(f"(previous point: {pp1})")
	#i_pp2 = ur3e_arm.inverse(ee_pose=f_pp2, all_solutions=True)
	#print(i_pp2)
	#print("\n")

'''
for i in points:
	f = ur3e_arm.forward(i)
	content = ""
	for j in f:
		content += str(j)
		content += ", "
	print("[", content, "],")

'''

print("old problematic points: ", problematic_points)
problematic_points = []

gened_traj =  [[0.8133000135421753, -1.5722999572753906, 0.9086000323295593, -0.9059000015258789, -1.5597000122070312, -0.7509999871253967], [0.8133000135421753, -1.5722999572753906, 0.9086000323295593, -0.9059000015258789, -1.5597000122070312, -0.7509999871253967], [0.8133000135421753, -1.5722999572753906, 0.9086000323295593, -0.9059000015258789, -1.5597000122070312, -0.7509999871253967], [0.8306000232696533, -1.8761999607086182, 1.142899990081787, -0.8366000056266785, -1.5597000122070312, -0.7336999773979187], [0.8046000599861145, -1.126965880393982, 0.3133997619152069, -0.7559338808059692, -1.5597000122070312, -0.7596999406814575], [0.7890999913215637, -1.5583000183105469, 0.8947999477386475, -0.9057999849319458, -1.5597000122070312, -0.7750999927520752], [0.7900000214576721, -1.614300012588501, 1.0638999938964844, -1.0190000534057617, -1.5597000122070312, -0.7742999792098999], [0.7900000214576721, -1.614300012588501, 1.0638999938964844, -1.0190000534057617, -1.5597000122070312, -0.7742999792098999], [0.7914999723434448, -1.6132999658584595, 1.062999963760376, -1.0190000534057617, -1.5597000122070312, -0.7728000283241272], [0.7912999987602234, -1.610200047492981, 1.059999942779541, -1.0191999673843384, -1.5597000122070312, -0.7730000019073486], [0.7913999557495117, -1.6095001697540283, 1.0592999458312988, -1.0192999839782715, -1.5597000122070312, -0.772800087928772], [0.7957000136375427, -1.607300043106079, 1.0572998523712158, -1.0194000005722046, -1.5597000122070312, -0.7684999704360962], [0.7963999509811401, -1.6079000234603882, 1.057800054550171, -1.0192999839782715, -1.5597000122070312, -0.7679000496864319], [0.7979000210762024, -1.607800006866455, 1.0577000379562378, -1.0194000005722046, -1.5597000122070312, -0.7663000226020813], [0.7993999123573303, -1.6124999523162842, 1.0621000528335571, -1.0190999507904053, -1.5597000122070312, -0.7649000883102417], [0.7987999320030212, -1.6152000427246094, 1.0647000074386597, -1.0189000368118286, -1.5597000122070312, -0.7654000520706177], [0.7942000031471252, -1.61489999294281, 1.0643999576568604, -1.0190000534057617, -1.5597000122070312, -0.7700999975204468], [0.7942000031471252, -1.61489999294281, 1.0643999576568604, -1.0190000534057617, -1.5597000122070312, -0.7700999975204468], [0.7934000492095947, -1.558899998664856, 0.8952999114990234, -0.9057999849319458, -1.5597000122070312, -0.7708999514579773], [0.8046000003814697, -1.1269999742507935, 0.313400000333786, -0.7559999823570251, -1.5597000122070312, -0.7597000002861023], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.771399974822998, -1.5663000345230103, 0.902999997138977, -0.9059000015258789, -1.5597000122070312, -0.7928000092506409], [0.7721999883651733, -1.621899962425232, 1.0712000131607056, -1.0184999704360962, -1.5597000122070312, -0.7919999957084656], [0.7721999883651733, -1.621899962425232, 1.0712000131607056, -1.0184999704360962, -1.5597000122070312, -0.7919999957084656], [0.773400068283081, -1.6190999746322632, 1.06850004196167, -1.0187000036239624, -1.5597000122070312, -0.790899932384491], [0.7731999754905701, -1.6186999082565308, 1.068199872970581, -1.0187000036239624, -1.5597000122070312, -0.791100025177002], [0.777999997138977, -1.6145000457763672, 1.0642999410629272, -1.0190000534057617, -1.5597000122070312, -0.786300003528595], [0.7803999781608582, -1.6166000366210938, 1.0662000179290771, -1.0188000202178955, -1.5597000122070312, -0.7839000225067139], [0.7831000089645386, -1.6160000562667847, 1.0656001567840576, -1.0189000368118286, -1.5597000122070312, -0.7811999917030334], [0.7829999327659607, -1.6110999584197998, 1.0609999895095825, -1.0191999673843384, -1.5597000122070312, -0.7812000513076782], [0.7829999327659607, -1.6110999584197998, 1.0609999895095825, -1.0191999673843384, -1.5597000122070312, -0.7812000513076782], [0.7821999788284302, -1.5549999475479126, 0.8914999961853027, -0.9057000279426575, -1.5597000122070312, -0.7820000052452087], [0.8041999340057373, -1.5540000200271606, 0.8902000188827515, -0.9057000279426575, -1.5597000122070312, -0.7601000666618347], [0.8050000071525574, -1.6101000308990479, 1.0598000288009644, -1.0191999673843384, -1.5597000122070312, -0.7592999935150146], [0.8050000071525574, -1.6101000308990479, 1.0598000288009644, -1.0191999673843384, -1.5597000122070312, -0.7592999935150146], [0.8030999898910522, -1.6166000366210938, 1.065999984741211, -1.0189000368118286, -1.5597000122070312, -0.7610999941825867], [0.806999921798706, -1.618899941444397, 1.0680999755859375, -1.0187000036239624, -1.5597000122070312, -0.757300078868866], [0.8082000017166138, -1.6187000274658203, 1.0678999423980713, -1.0187000036239624, -1.5597000122070312, -0.7560999989509583], [0.8095999956130981, -1.6193000078201294, 1.0684000253677368, -1.0187000036239624, -1.5597000122070312, -0.7545999884605408], [0.8101000189781189, -1.6151000261306763, 1.064500093460083, -1.0190000534057617, -1.5597000122070312, -0.7541999816894531], [0.8093000054359436, -1.6145999431610107, 1.0640000104904175, -1.0190000534057617, -1.5597000122070312, -0.7549999952316284], [0.8104999661445618, -1.611299991607666, 1.0608999729156494, -1.0191999673843384, -1.5597000122070312, -0.7538000345230103], [0.8138999342918396, -1.6129001379013062, 1.0624001026153564, -1.0190999507904053, -1.5597000122070312, -0.7504000663757324], [0.8138999342918396, -1.6129001379013062, 1.0624001026153564, -1.0190999507904053, -1.5597000122070312, -0.7504000663757324], [0.8130999803543091, -1.5569000244140625, 0.8929999470710754, -0.905799925327301, -1.5597000122070312, -0.7512000203132629], [0.8046000003814697, -1.1269999742507935, 0.313400000333786, -0.7559999823570251, -1.5597000122070312, -0.7597000002861023], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.8088000416755676, -1.5717999935150146, 0.9081000089645386, -0.9059000611305237, -1.5597000122070312, -0.7553999423980713], [0.8095999956130981, -1.6273000240325928, 1.0757999420166016, -1.0181000232696533, -1.5597000122070312, -0.7545999884605408], [0.8095999956130981, -1.6273000240325928, 1.0757999420166016, -1.0181000232696533, -1.5597000122070312, -0.7545999884605408], [0.8126000165939331, -1.6234999895095825, 1.0722999572753906, -1.018399953842163, -1.5597000122070312, -0.7516000270843506], [0.8126000165939331, -1.6234999895095825, 1.0722999572753906, -1.018399953842163, -1.5597000122070312, -0.7516000270843506], [0.8118000030517578, -1.5678000450134277, 0.9042000770568848, -0.9059000611305237, -1.5597000122070312, -0.7523999810218811], [0.8046000003814697, -1.1269999742507935, 0.313400000333786, -0.7559999823570251, -1.5597000122070312, -0.7597000002861023], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.7401000261306763, -1.576300024986267, 0.9132999777793884, -0.9059000015258789, -1.5598000288009644, -0.8241999745368958], [0.740899920463562, -1.631600022315979, 1.0805000066757202, -1.017699956893921, -1.5598000288009644, -0.82340008020401], [0.740899920463562, -1.631600022315979, 1.0805000066757202, -1.017699956893921, -1.5598000288009644, -0.82340008020401], [0.7448999881744385, -1.6349999904632568, 1.0836000442504883, -1.0174000263214111, -1.5598000288009644, -0.8192999958992004], [0.7487999796867371, -1.6323000192642212, 1.0809999704360962, -1.017699956893921, -1.5598000288009644, -0.8154000043869019], [0.7508000731468201, -1.6265000104904175, 1.075600028038025, -1.0181000232696533, -1.5598000288009644, -0.8133999109268188], [0.751300036907196, -1.625499963760376, 1.0748000144958496, -1.0182000398635864, -1.5598000288009644, -0.8128999471664429], [0.7542999982833862, -1.624899983406067, 1.0741000175476074, -1.0182000398635864, -1.5598000288009644, -0.8098999857902527], [0.7545999884605408, -1.625499963760376, 1.0748001337051392, -1.0182000398635864, -1.5598000288009644, -0.8095999956130981], [0.7580000162124634, -1.6232000589370728, 1.0724999904632568, -1.018399953842163, -1.5598000288009644, -0.8062000274658203], [0.7623000144958496, -1.6201000213623047, 1.0696001052856445, -1.0185999870300293, -1.5597000122070312, -0.8019000291824341], [0.7627999782562256, -1.62090003490448, 1.0703999996185303, -1.0184999704360962, -1.5597000122070312, -0.8015000224113464], [0.7618000507354736, -1.626099944114685, 1.075199842453003, -1.0182000398635864, -1.5597000122070312, -0.8024999499320984], [0.7618000507354736, -1.626099944114685, 1.075199842453003, -1.0182000398635864, -1.5597000122070312, -0.8024999499320984], [0.7609999775886536, -1.5706000328063965, 0.9074999690055847, -0.9058999419212341, -1.5598000288009644, -0.8033000230789185], [0.7275000214576721, -1.5958000421524048, 0.9324999451637268, -0.9053999781608582, -1.5598000288009644, -0.8367000222206116], [0.7283999919891357, -1.6505999565124512, 1.0976999998092651, -1.0159000158309937, -1.5598000288009644, -0.8359000086784363], [0.7283999919891357, -1.6505999565124512, 1.0976999998092651, -1.0159000158309937, -1.5598000288009644, -0.8359000086784363], [0.7289999723434448, -1.6519999504089355, 1.0989999771118164, -1.0156999826431274, -1.5598000288009644, -0.8353000283241272], [0.7330999970436096, -1.6485999822616577, 1.095900058746338, -1.0161000490188599, -1.5598000288009644, -0.8310999870300293], [0.734000027179718, -1.6450999975204468, 1.0928000211715698, -1.0163999795913696, -1.5598000288009644, -0.8302000164985657], [0.7300999760627747, -1.6461000442504883, 1.0937000513076782, -1.0162999629974365, -1.5598000288009644, -0.8342000246047974], [0.7296000123023987, -1.6474000215530396, 1.0949000120162964, -1.0161999464035034, -1.5598000288009644, -0.8346999883651733], [0.728600025177002, -1.6437000036239624, 1.091599941253662, -1.0166000127792358, -1.5598000288009644, -0.8356000185012817], [0.730199933052063, -1.6385999917984009, 1.0870001316070557, -1.0170999765396118, -1.5598000288009644, -0.834100067615509], [0.733299970626831, -1.6407999992370605, 1.0888999700546265, -1.0168999433517456, -1.5598000288009644, -0.8309999704360962], [0.733299970626831, -1.6407999992370605, 1.0888999700546265, -1.0168999433517456, -1.5598000288009644, -0.8309999704360962], [0.7323999404907227, -1.5857000350952148, 0.9226999878883362, -0.9056999683380127, -1.5598000288009644, -0.8318000435829163], [0.7355999946594238, -1.5973999500274658, 0.9340000152587891, -0.905299961566925, -1.5598000288009644, -0.8287000060081482], [0.7364000082015991, -1.6522001028060913, 1.099100112915039, -1.0156999826431274, -1.5598000288009644, -0.8277999758720398], [0.7364000082015991, -1.6522001028060913, 1.099100112915039, -1.0156999826431274, -1.5598000288009644, -0.8277999758720398], [0.7353000044822693, -1.6531000137329102, 1.0999000072479248, -1.0155999660491943, -1.5598000288009644, -0.8289999961853027], [0.7307000160217285, -1.655400037765503, 1.1019999980926514, -1.0153000354766846, -1.5598000288009644, -0.8335999846458435], [0.7307000160217285, -1.655400037765503, 1.1019999980926514, -1.0153000354766846, -1.5598000288009644, -0.8335999846458435], [0.7297999858856201, -1.6007000207901, 0.9372000694274902, -0.9052000641822815, -1.5598000288009644, -0.8343999981880188], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.8306000232696533, -1.8761999607086182, 1.142899990081787, -0.8366000056266785, -1.5597000122070312, -0.7336999773979187], [0.7738999724388123, -1.6335999965667725, 0.9672999978065491, -0.9029999375343323, -1.5597000122070312, -0.7904000282287598], [0.7747000455856323, -1.6875, 1.1292999982833862, -1.0110000371932983, -1.5597000122070312, -0.7894999384880066], [0.7747000455856323, -1.6875, 1.1292999982833862, -1.0110000371932983, -1.5597000122070312, -0.7894999384880066], [0.7750999927520752, -1.6858999729156494, 1.128000020980835, -1.011199951171875, -1.5597000122070312, -0.7890999913215637], [0.7768999338150024, -1.6866999864578247, 1.128600001335144, -1.0111000537872314, -1.5597000122070312, -0.7874000668525696], [0.7785000205039978, -1.6899000406265259, 1.1312999725341797, -1.010599970817566, -1.5597000122070312, -0.7857000231742859], [0.7687000036239624, -1.6929999589920044, 1.1339000463485718, -1.01010000705719, -1.5597000122070312, -0.7954999804496765], [0.7665000557899475, -1.6998000144958496, 1.1396000385284424, -1.0089000463485718, -1.5597000122070312, -0.7977999448776245], [0.7639999389648438, -1.700600028038025, 1.1403000354766846, -1.0088000297546387, -1.5597000122070312, -0.8003000617027283], [0.7631000876426697, -1.7000000476837158, 1.139799952507019, -1.0089000463485718, -1.5597000122070312, -0.801099956035614], [0.7592999935150146, -1.7007999420166016, 1.1404999494552612, -1.0087000131607056, -1.5598000288009644, -0.8050000071525574], [0.752500057220459, -1.7049999237060547, 1.1439999341964722, -1.0080000162124634, -1.5598000288009644, -0.8116999268531799], [0.7512000203132629, -1.7001999616622925, 1.1399999856948853, -1.0088000297546387, -1.5598000288009644, -0.8130999803543091], [0.7512000203132629, -1.7001999616622925, 1.1399999856948853, -1.0088000297546387, -1.5598000288009644, -0.8130999803543091], [0.7502999901771545, -1.646399974822998, 0.9790999293327332, -0.9016000032424927, -1.5598000288009644, -0.8140000104904175], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.8306000232696533, -1.8761999607086182, 1.142899990081787, -0.8366000056266785, -1.5597000122070312, -0.7336999773979187], [0.7993000149726868, -1.595900058746338, 0.9319000244140625, -0.9053999781608582, -1.5597000122070312, -0.7649000287055969], [0.8002000451087952, -1.6506999731063843, 1.0972000360488892, -1.0159000158309937, -1.5597000122070312, -0.7640999555587769], [0.8002000451087952, -1.6506999731063843, 1.0972000360488892, -1.0159000158309937, -1.5597000122070312, -0.7640999555587769], [0.7973999381065369, -1.649999976158142, 1.096500039100647, -1.0160000324249268, -1.5597000122070312, -0.7669000625610352], [0.7990999817848206, -1.6471999883651733, 1.093999981880188, -1.0162999629974365, -1.5597000122070312, -0.7652000188827515], [0.8040000796318054, -1.6455999612808228, 1.0925999879837036, -1.0164999961853027, -1.5597000122070312, -0.7602999210357666], [0.804599940776825, -1.6441999673843384, 1.0913000106811523, -1.0166000127792358, -1.5597000122070312, -0.759600043296814], [0.8054999709129333, -1.642899990081787, 1.0901000499725342, -1.016800045967102, -1.5597000122070312, -0.7588000297546387], [0.805899977684021, -1.641800045967102, 1.0891000032424927, -1.0168999433517456, -1.5597000122070312, -0.758400022983551], [0.8044000267982483, -1.6430000066757202, 1.0902999639511108, -1.016700029373169, -1.5597000122070312, -0.7598999738693237], [0.8075000047683716, -1.6384999752044678, 1.0862001180648804, -1.017199993133545, -1.5597000122070312, -0.7567999958992004], [0.8109999895095825, -1.6389000415802002, 1.0864999294281006, -1.017199993133545, -1.5597000122070312, -0.7533000111579895], [0.810699999332428, -1.6412999629974365, 1.0886999368667603, -1.0168999433517456, -1.5597000122070312, -0.753600001335144], [0.8128000497817993, -1.6396000385284424, 1.0870000123977661, -1.0170999765396118, -1.5597000122070312, -0.7513999342918396], [0.808899998664856, -1.6440000534057617, 1.0910999774932861, -1.016700029373169, -1.5597000122070312, -0.755299985408783], [0.808899998664856, -1.6440000534057617, 1.0910999774932861, -1.016700029373169, -1.5597000122070312, -0.755299985408783], [0.8080999255180359, -1.5890001058578491, 0.9251000881195068, -0.9057000279426575, -1.5597000122070312, -0.7562000751495361], [0.8306000232696533, -1.8761999607086182, 1.142899990081787, -0.8366000056266785, -1.5597000122070312, -0.7336999773979187], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.7778000235557556, -1.6234999895095825, 0.9580999612808228, -0.9038000106811523, -1.5597000122070312, -0.7864999771118164], [0.7785999774932861, -1.6777000427246094, 1.12090003490448, -1.0125000476837158, -1.5597000122070312, -0.7856000065803528], [0.7785999774932861, -1.6777000427246094, 1.12090003490448, -1.0125000476837158, -1.5597000122070312, -0.7856000065803528], [0.7799000144004822, -1.6770000457763672, 1.120300054550171, -1.0125999450683594, -1.5597000122070312, -0.7843000292778015], [0.781499981880188, -1.6792999505996704, 1.1223000288009644, -1.0123000144958496, -1.5597000122070312, -0.782800018787384], [0.7853999733924866, -1.670199990272522, 1.114400029182434, -1.0135999917984009, -1.5597000122070312, -0.7789000272750854], [0.7800999879837036, -1.6694999933242798, 1.1138999462127686, -1.0135999917984009, -1.5597000122070312, -0.7840999960899353], [0.779699981212616, -1.6655999422073364, 1.1105000972747803, -1.0140999555587769, -1.5597000122070312, -0.784600019454956], [0.7771999835968018, -1.667099952697754, 1.111799955368042, -1.0140000581741333, -1.5597000122070312, -0.7871000170707703], [0.7809000611305237, -1.6603999137878418, 1.1059998273849487, -1.014799952507019, -1.5597000122070312, -0.7832999229431152], [0.7840999364852905, -1.659000039100647, 1.104599952697754, -1.0149999856948853, -1.5597000122070312, -0.7802000641822815], [0.7852999567985535, -1.6579999923706055, 1.1038000583648682, -1.0151000022888184, -1.5597000122070312, -0.7790000438690186], [0.7883999943733215, -1.6563999652862549, 1.1023000478744507, -1.0153000354766846, -1.5597000122070312, -0.7757999897003174], [0.7871999740600586, -1.6598000526428223, 1.1053999662399292, -1.0148999691009521, -1.5597000122070312, -0.7771000266075134], [0.7928999662399292, -1.656000018119812, 1.1019999980926514, -1.0153000354766846, -1.5597000122070312, -0.7713000774383545], [0.7928999662399292, -1.656000018119812, 1.1019999980926514, -1.0153000354766846, -1.5597000122070312, -0.7713000774383545], [0.7921000719070435, -1.6013998985290527, 0.9371999502182007, -0.9052000045776367, -1.5597000122070312, -0.7721999287605286], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.8306000232696533, -1.8761999607086182, 1.142899990081787, -0.8366000056266785, -1.5597000122070312, -0.7336999773979187], [1.1123045682907104, -1.3145112991333008, 0.5987123250961304, -0.8571740388870239, -1.5598666667938232, -0.45190441608428955], [0.8153395652770996, -1.5728145837783813, 0.9090902805328369, -0.9059812426567078, -1.5596511363983154, -0.748890221118927], [0.8161265850067139, -1.6283291578292847, 1.076709508895874, -1.0180891752243042, -1.5596507787704468, -0.748103141784668], [0.8161265850067139, -1.6283291578292847, 1.076709508895874, -1.0180891752243042, -1.5596507787704468, -0.748103141784668], [0.8161265850067139, -1.6283291578292847, 1.076709508895874, -1.0180891752243042, -1.5596507787704468, -0.748103141784668], [0.8153395652770996, -1.5728145837783813, 0.9090902805328369, -0.9059812426567078, -1.5596511363983154, -0.748890221118927], [1.1123000383377075, -1.314499855041504, 0.5985998511314392, -0.8570999503135681, -1.5598000288009644, -0.4518999755382538], [0.8306000232696533, -1.8761999607086182, 1.142899990081787, -0.8366000056266785, -1.5597000122070312, -0.7336999773979187], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.7297000885009766, -1.6151000261306763, 0.9508000016212463, -0.9044000506401062, -1.5598000288009644, -0.8344999551773071], [0.7305999994277954, -1.6694999933242798, 1.114300012588501, -1.0135999917984009, -1.5598000288009644, -0.8337000012397766], [0.7305999994277954, -1.6694999933242798, 1.114300012588501, -1.0135999917984009, -1.5598000288009644, -0.8337000012397766], [0.7305999994277954, -1.6694999933242798, 1.114300012588501, -1.0135999917984009, -1.5598000288009644, -0.8337000012397766], [0.7297000885009766, -1.6151000261306763, 0.9508000016212463, -0.9044000506401062, -1.5598000288009644, -0.8344999551773071], [0.7383999824523926, -1.6510000228881836, 0.9832000136375427, -0.9010999798774719, -1.5598000288009644, -0.8259000182151794], [0.7392999529838562, -1.7047001123428345, 1.1439001560211182, -1.0080000162124634, -1.5598000288009644, -0.8250000476837158], [0.7392999529838562, -1.7047001123428345, 1.1439001560211182, -1.0080000162124634, -1.5598000288009644, -0.8250000476837158], [0.7392999529838562, -1.7047001123428345, 1.1439001560211182, -1.0080000162124634, -1.5598000288009644, -0.8250000476837158], [0.7383999824523926, -1.6510000228881836, 0.9832000136375427, -0.9010999798774719, -1.5598000288009644, -0.8259000182151794], [0.453900009393692, -1.7107000350952148, 1.0361000299453735, -0.8910999894142151, -1.5607999563217163, -1.1103999614715576], [0.8306000232696533, -1.8761999607086182, 1.142899990081787, -0.8366000056266785, -1.5597000122070312, -0.7336999773979187], [0.8133000135421753, -1.5722999572753906, 0.9086000323295593, -0.9059000015258789, -1.5597000122070312, -0.7509999871253967], [0.8133000135421753, -1.5722999572753906, 0.9086000323295593, -0.9059000015258789, -1.5597000122070312, -0.7509999871253967], [0.8133000135421753, -1.5722999572753906, 0.9086000323295593, -0.9059000015258789, -1.5597000122070312, -0.7509999871253967]]


points = gened_traj
joints = [0,1,2,3,4,5]
for i in range(1,len(points)):
	p1 = points[i-1]
	p2 = points[i]
	for j in range(len(p1)):
		ax1 = p1[j]
		ax2 = p2[j]
		if (ax1-ax2 > margin or ax1-ax2 < -1 * margin) and j in joints:
			print(f"Large difference detected at index {i}:{j} : {ax1} vs {ax2}")
			problematic_points.append(i)

print("new problematic points: ", problematic_points)

print()